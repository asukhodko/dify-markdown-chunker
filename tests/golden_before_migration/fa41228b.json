{
  "fixture_name": "code_heavy",
  "parameters": {
    "include_metadata": true,
    "enable_hierarchy": true,
    "debug": true,
    "strategy": "structural"
  },
  "config_used": {
    "max_chunk_size": 4096,
    "min_chunk_size": 512,
    "overlap_size": 200,
    "preserve_atomic_blocks": true,
    "extract_preamble": true,
    "code_threshold": 0.3,
    "structure_threshold": 3,
    "list_ratio_threshold": 0.4,
    "list_count_threshold": 5,
    "strategy_override": "structural",
    "enable_code_context_binding": true,
    "max_context_chars_before": 500,
    "max_context_chars_after": 300,
    "related_block_max_gap": 5,
    "bind_output_blocks": true,
    "preserve_before_after_pairs": true,
    "enable_overlap": true
  },
  "output": [
    "<metadata>\n{\n  \"chunk_id\": \"a23ddcb1\",\n  \"content_type\": \"document\",\n  \"header_path\": \"/\",\n  \"header_level\": 0,\n  \"parent_id\": null,\n  \"children_ids\": [\n    \"964736d1\"\n  ],\n  \"hierarchy_level\": 0,\n  \"is_root\": true,\n  \"strategy\": \"hierarchical\",\n  \"is_leaf\": false,\n  \"start_line\": 1,\n  \"end_line\": 74\n}\n</metadata>\n# Code-Heavy Document\n\nThis document contains lots of code blocks for testing code-focused chunking.",
    "<metadata>\n{\n  \"strategy\": \"structural\",\n  \"content_type\": \"section\",\n  \"header_path\": \"/Code-Heavy Document\",\n  \"header_level\": 1,\n  \"section_tags\": [],\n  \"next_content\": \"## JavaScript Example\\n\\nAnd here's some JavaScript:\\n\\n```javascript\\nclass DataProcessor {\\n    constructor(data) {\\n        this.data = data;\\n        this.processed = false;\\n    }\\n    \\n    process() {\\n  \",\n  \"chunk_index\": 0,\n  \"has_code\": true,\n  \"chunk_id\": \"964736d1\",\n  \"parent_id\": \"a23ddcb1\",\n  \"children_ids\": [\n    \"02f66f72\",\n    \"e18adf33\",\n    \"acc63a03\"\n  ],\n  \"hierarchy_level\": 1,\n  \"is_leaf\": true,\n  \"start_line\": 1,\n  \"end_line\": 20\n}\n</metadata>\n# Code-Heavy Document\n\nThis document contains lots of code blocks for testing code-focused chunking.\n\n\n## Python Example\n\nHere's a Python function:\n\n```python\ndef calculate_fibonacci(n):\n    \"\"\"Calculate the nth Fibonacci number.\"\"\"\n    if n <= 1:\n        return n\n    return calculate_fibonacci(n-1) + calculate_fibonacci(n-2)\n\n# Example usage\nfor i in range(10):\n    print(f\"F({i}) = {calculate_fibonacci(i)}\")\n```\n",
    "<metadata>\n{\n  \"strategy\": \"structural\",\n  \"content_type\": \"section\",\n  \"header_path\": \"/Code-Heavy Document/JavaScript Example\",\n  \"header_level\": 2,\n  \"section_tags\": [],\n  \"previous_content\": \"calculate_fibonacci(n-1) + calculate_fibonacci(n-2)\\n\\n# Example usage\\nfor i in range(10):\\n    print(f\\\"F({i}) = {calculate_fibonacci(i)}\\\")\\n```\\n\",\n  \"overlap_size\": 141,\n  \"next_content\": \"## SQL Example\\n\\nDatabase queries:\\n\\n```sql\\nSELECT \\n    u.id,\\n    u.username,\\n    COUNT(p.id) as\",\n  \"chunk_index\": 1,\n  \"has_code\": true,\n  \"chunk_id\": \"02f66f72\",\n  \"parent_id\": \"964736d1\",\n  \"next_sibling_id\": \"e18adf33\",\n  \"hierarchy_level\": 2,\n  \"is_leaf\": true,\n  \"start_line\": 21,\n  \"end_line\": 51\n}\n</metadata>\n## JavaScript Example\n\nAnd here's some JavaScript:\n\n```javascript\nclass DataProcessor {\n    constructor(data) {\n        this.data = data;\n        this.processed = false;\n    }\n    \n    process() {\n        if (this.processed) {\n            throw new Error('Already processed');\n        }\n        \n        this.data = this.data.map(item => ({\n            ...item,\n            timestamp: Date.now(),\n            processed: true\n        }));\n        \n        this.processed = true;\n        return this.data;\n    }\n}\n\nconst processor = new DataProcessor([{id: 1}, {id: 2}]);\nconsole.log(processor.process());\n```\n",
    "<metadata>\n{\n  \"strategy\": \"structural\",\n  \"content_type\": \"section\",\n  \"header_path\": \"/Code-Heavy Document/SQL Example\",\n  \"header_level\": 2,\n  \"section_tags\": [],\n  \"previous_content\": \" processed: true\\n        }));\\n        \\n        this.processed = true;\\n        return this.data;\\n    }\\n}\\n\\nconst processor = new DataProcessor([{id: 1}, {id: 2}]);\\nconsole.log(processor.process());\\n```\\n\",\n  \"overlap_size\": 200,\n  \"next_content\": \"## Conclusion\\n\\nCode\",\n  \"chunk_index\": 2,\n  \"has_code\": true,\n  \"chunk_id\": \"e18adf33\",\n  \"parent_id\": \"964736d1\",\n  \"prev_sibling_id\": \"02f66f72\",\n  \"next_sibling_id\": \"acc63a03\",\n  \"hierarchy_level\": 2,\n  \"is_leaf\": true,\n  \"start_line\": 52,\n  \"end_line\": 70\n}\n</metadata>\n## SQL Example\n\nDatabase queries:\n\n```sql\nSELECT \n    u.id,\n    u.username,\n    COUNT(p.id) as post_count,\n    MAX(p.created_at) as last_post\nFROM users u\nLEFT JOIN posts p ON u.id = p.user_id\nWHERE u.active = true\nGROUP BY u.id, u.username\nHAVING COUNT(p.id) > 5\nORDER BY last_post DESC\nLIMIT 10;\n```\n",
    "<metadata>\n{\n  \"strategy\": \"structural\",\n  \"content_type\": \"section\",\n  \"header_path\": \"/Code-Heavy Document/Conclusion\",\n  \"header_level\": 2,\n  \"section_tags\": [],\n  \"previous_content\": \"u.active = true\\nGROUP BY u.id, u.username\\nHAVING COUNT(p.id) > 5\\nORDER BY last_post DESC\\nLIMIT 10;\\n```\\n\",\n  \"overlap_size\": 103,\n  \"chunk_index\": 3,\n  \"has_code\": false,\n  \"chunk_id\": \"acc63a03\",\n  \"parent_id\": \"964736d1\",\n  \"prev_sibling_id\": \"e18adf33\",\n  \"hierarchy_level\": 2,\n  \"is_leaf\": true,\n  \"start_line\": 71,\n  \"end_line\": 74\n}\n</metadata>\n## Conclusion\n\nCode blocks should be kept together when possible.\n"
  ],
  "snapshot_id": "fa41228b"
}